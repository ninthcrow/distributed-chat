<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Distributed Chat: Chat Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Distributed Chat
   </div>
   <div id="projectbrief">A decentralized chat system for iPad</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_chat-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Chat Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a> responsible for sending and receiving messages using a XML based protocol.  
 <a href="interface_chat.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Chat:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_chat.png" usemap="#Chat_map" alt=""/>
  <map id="Chat_map" name="Chat_map">
<area href="interface_block.html" title="Block as a piece of a stack." alt="Block" shape="rect" coords="0,56,66,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a2e0f74f5d5db49650a5c1a3f4e3ad71b"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_chat.html">Chat</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_chat.html#a2e0f74f5d5db49650a5c1a3f4e3ad71b">initWithApp:</a></td></tr>
<tr class="memdesc:a2e0f74f5d5db49650a5c1a3f4e3ad71b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inits this block.  <a href="#a2e0f74f5d5db49650a5c1a3f4e3ad71b">More...</a><br/></td></tr>
<tr class="separator:a2e0f74f5d5db49650a5c1a3f4e3ad71b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f224b86590655bc902bacad55021ed7"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_chat.html#a6f224b86590655bc902bacad55021ed7">recvMessage:</a></td></tr>
<tr class="memdesc:a6f224b86590655bc902bacad55021ed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a message from the underlying TCP server.  <a href="#a6f224b86590655bc902bacad55021ed7">More...</a><br/></td></tr>
<tr class="separator:a6f224b86590655bc902bacad55021ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6bf9e4eb746325e487ba82a17411587"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_chat.html#ac6bf9e4eb746325e487ba82a17411587">sendMessage:</a></td></tr>
<tr class="memdesc:ac6bf9e4eb746325e487ba82a17411587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to all users.  <a href="#ac6bf9e4eb746325e487ba82a17411587">More...</a><br/></td></tr>
<tr class="separator:ac6bf9e4eb746325e487ba82a17411587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae26bf687532d0a86b3462cca86858a85"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae26bf687532d0a86b3462cca86858a85"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>dealloc</b><code> [implementation]</code></td></tr>
<tr class="separator:ae26bf687532d0a86b3462cca86858a85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interface_block"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interface_block')"><img src="closed.png" alt="-"/>&#160;Instance Methods inherited from <a class="el" href="interface_block.html">Block</a></td></tr>
<tr class="memitem:a91799a8b81f61088dbaeab6caf77aa14 inherit pub_methods_interface_block"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_block.html">Block</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_block.html#a91799a8b81f61088dbaeab6caf77aa14">initWithUp:</a></td></tr>
<tr class="memdesc:a91799a8b81f61088dbaeab6caf77aa14 inherit pub_methods_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates the <a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a> after being allocated.  <a href="#a91799a8b81f61088dbaeab6caf77aa14">More...</a><br/></td></tr>
<tr class="separator:a91799a8b81f61088dbaeab6caf77aa14 inherit pub_methods_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a2504f03af6024abe18d1db41e232c inherit pub_methods_interface_block"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_block.html#aa4a2504f03af6024abe18d1db41e232c">pushUp:lenght:</a></td></tr>
<tr class="memdesc:aa4a2504f03af6024abe18d1db41e232c inherit pub_methods_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives the data from the lower <a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a>.  <a href="#aa4a2504f03af6024abe18d1db41e232c">More...</a><br/></td></tr>
<tr class="separator:aa4a2504f03af6024abe18d1db41e232c inherit pub_methods_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d484b2a5a5835b4515c3c043f142b5 inherit pub_methods_interface_block"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_block.html#ae8d484b2a5a5835b4515c3c043f142b5">pushDown:lenght:</a></td></tr>
<tr class="memdesc:ae8d484b2a5a5835b4515c3c043f142b5 inherit pub_methods_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives the data from the upper <a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a>.  <a href="#ae8d484b2a5a5835b4515c3c043f142b5">More...</a><br/></td></tr>
<tr class="separator:ae8d484b2a5a5835b4515c3c043f142b5 inherit pub_methods_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4aea7e6e9945c9c3f38a35d200b3b9 inherit pub_methods_interface_block"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_block.html#a9e4aea7e6e9945c9c3f38a35d200b3b9">end</a></td></tr>
<tr class="memdesc:a9e4aea7e6e9945c9c3f38a35d200b3b9 inherit pub_methods_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish the <a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a> operation.  <a href="#a9e4aea7e6e9945c9c3f38a35d200b3b9">More...</a><br/></td></tr>
<tr class="separator:a9e4aea7e6e9945c9c3f38a35d200b3b9 inherit pub_methods_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db5f71dfdb786192aec443f570da1af inherit pub_methods_interface_block"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_master_view_controller.html">MasterViewController</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_block.html#a6db5f71dfdb786192aec443f570da1af">top</a></td></tr>
<tr class="memdesc:a6db5f71dfdb786192aec443f570da1af inherit pub_methods_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="interface_view_controller.html">ViewController</a>.  <a href="#a6db5f71dfdb786192aec443f570da1af">More...</a><br/></td></tr>
<tr class="separator:a6db5f71dfdb786192aec443f570da1af inherit pub_methods_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a8270536b1bd3a8d34705aca07a152e0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_app_delegate.html">AppDelegate</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_chat.html#a8270536b1bd3a8d34705aca07a152e0e">app</a></td></tr>
<tr class="memdesc:a8270536b1bd3a8d34705aca07a152e0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application delegate.  <a href="#a8270536b1bd3a8d34705aca07a152e0e">More...</a><br/></td></tr>
<tr class="separator:a8270536b1bd3a8d34705aca07a152e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdaf33f5aff129d91c020db8336325c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tcp_operation.html">TcpOperation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_chat.html#abdaf33f5aff129d91c020db8336325c2">server</a></td></tr>
<tr class="memdesc:abdaf33f5aff129d91c020db8336325c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The TCP server.  <a href="#abdaf33f5aff129d91c020db8336325c2">More...</a><br/></td></tr>
<tr class="separator:abdaf33f5aff129d91c020db8336325c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_block"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_block')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_block.html">Block</a></td></tr>
<tr class="memitem:a5371bfc11dcb5a2d7db579f841629884 inherit properties_interface_block"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_block.html">Block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_block.html#a5371bfc11dcb5a2d7db579f841629884">down</a></td></tr>
<tr class="memdesc:a5371bfc11dcb5a2d7db579f841629884 inherit properties_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower <a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a>.  <a href="#a5371bfc11dcb5a2d7db579f841629884">More...</a><br/></td></tr>
<tr class="separator:a5371bfc11dcb5a2d7db579f841629884 inherit properties_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f14e3c4613cfbf6b19fe4d0ee767f6 inherit properties_interface_block"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_block.html">Block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_block.html#a17f14e3c4613cfbf6b19fe4d0ee767f6">up</a></td></tr>
<tr class="memdesc:a17f14e3c4613cfbf6b19fe4d0ee767f6 inherit properties_interface_block"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upper <a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a>.  <a href="#a17f14e3c4613cfbf6b19fe4d0ee767f6">More...</a><br/></td></tr>
<tr class="separator:a17f14e3c4613cfbf6b19fe4d0ee767f6 inherit properties_interface_block"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interface_block.html" title="Block as a piece of a stack.">Block</a> responsible for sending and receiving messages using a XML based protocol. </p>
<h2>Protocol</h2>
<p>The communication works so that when A needs to send a message to B, A will connect to B send the message and close the connection. This way only one way communication is being used in the TCP stream. All messages are sent packed in the a XML based protocol defined in: </p>
<blockquote class="doxtable">
<p>NSString const *protocol</p>
<p></p>
</blockquote>
<p>To parse the protocol, the RE pattern is being used: </p>
<blockquote class="doxtable">
<p>NSString const *pattern</p>
<p></p>
</blockquote>
<p>The protocol also support private messages, which are not being used at the current implementation. The <em>from</em> and <em>to</em> fields are nicknames and the ones starting with "@" are reserved, since "@All" means the message should be sent to everyone.</p>
<h2>Transmited data</h2>
<p>The content that is transmited is always the message packed in the protocol and this is encrypted with the public key of the user who is receiving the connection. The encryption is done with the Class <a class="el" href="interface_verschluesselung.html">Verschluesselung</a> and the publick key can be retrieved from the <a class="el" href="interface_devices.html">Devices</a>.</p>
<h2>Sendinng messages</h2>
<p>When sending a message, a TCP connection is stablished to all users and encrypted with its respectively public key.</p>
<h2>Server</h2>
<p>When initiated, a TCP server is started. It will received connections from other users and forward the received data to recvMessage:data. </p>

<p>Definition at line <a class="el" href="_chat_8h_source.html#l00016">16</a> of file <a class="el" href="_chat_8h_source.html">Chat.h</a>.</p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a2e0f74f5d5db49650a5c1a3f4e3ad71b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_chat.html">Chat</a> *) initWithApp: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_app_delegate.html">AppDelegate</a> *)&#160;</td>
          <td class="paramname"><em>appDel</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inits this block. </p>
<p>Setup variables and start the TCP server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">appDel</td><td>Delegate expected to have pointers to other blocks. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_chat_8m_source.html#l00061">61</a> of file <a class="el" href="_chat_8m_source.html">Chat.m</a>.</p>

</div>
</div>
<a class="anchor" id="a6f224b86590655bc902bacad55021ed7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) recvMessage: </td>
          <td></td>
          <td class="paramtype">(NSData*)&#160;</td>
          <td class="paramname"><em>data</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives a message from the underlying TCP server. </p>
<p>This method should be called whenever a message was received by the listening <a class="el" href="interface_tcp_operation.html" title="Perform network operations using TCP in the background.">TcpOperation</a>. After parsing of the protocol, the message will be forwarded to the detailViewController for displaying.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Received message, encrypted with our public key. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_chat_8m_source.html#l00078">78</a> of file <a class="el" href="_chat_8m_source.html">Chat.m</a>.</p>

</div>
</div>
<a class="anchor" id="ac6bf9e4eb746325e487ba82a17411587"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) sendMessage: </td>
          <td></td>
          <td class="paramtype">(NSString*)&#160;</td>
          <td class="paramname"><em>message</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a message to all users. </p>
<p>To send the message, a TCP connection will be opened to every user with <a class="el" href="interface_tcp_operation.html" title="Perform network operations using TCP in the background.">TcpOperation</a>. The message is sent encrypted with the user's public key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The text to be sent. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_chat_8m_source.html#l00095">95</a> of file <a class="el" href="_chat_8m_source.html">Chat.m</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="a8270536b1bd3a8d34705aca07a152e0e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_app_delegate.html">AppDelegate</a>*) app</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span><span class="mlabel">nonatomic</span><span class="mlabel">weak</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The application delegate. </p>
<p>It will be used to find the address of other blocks. Like <a class="el" href="interface_devices.html">Devices</a> and detailedViewController that are needed to communicate with other elements of the application. </p>

<p>Definition at line <a class="el" href="_chat_8h_source.html#l00023">23</a> of file <a class="el" href="_chat_8h_source.html">Chat.h</a>.</p>

</div>
</div>
<a class="anchor" id="abdaf33f5aff129d91c020db8336325c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_tcp_operation.html">TcpOperation</a>*) server</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">write</span><span class="mlabel">nonatomic</span><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The TCP server. </p>
<p>This will controll the TCP socket that will be listenning for new connections. It will automatically call recvMessage:data when a new message was received. </p>

<p>Definition at line <a class="el" href="_chat_8h_source.html#l00030">30</a> of file <a class="el" href="_chat_8h_source.html">Chat.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Seminare/Blocks/<a class="el" href="_chat_8h_source.html">Chat.h</a></li>
<li>Seminare/Blocks/<a class="el" href="_chat_8m_source.html">Chat.m</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 2 2013 16:38:04 for Distributed Chat by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
